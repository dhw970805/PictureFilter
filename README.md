# PictureFilter - äººåƒæ‘„å½±åºŸç‰‡è¿‡æ»¤å·¥å…·

> åŸºäº Python çš„æ¡Œé¢å®¢æˆ·ç«¯åº”ç”¨ï¼Œä½¿ç”¨ PyQt6 + FastAPI æ„å»ºçš„ä¸“ä¸šçº§äººåƒæ‘„å½±ç…§ç‰‡ç­›é€‰å·¥å…·ã€‚

## é¡¹ç›®ç®€ä»‹

PictureFilter æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„äººåƒæ‘„å½±åºŸç‰‡è¿‡æ»¤å·¥å…·ï¼Œå¸®åŠ©æ‘„å½±å¸ˆå¿«é€Ÿç­›é€‰å’Œè¿‡æ»¤äººåƒæ‘„å½±ä¸­çš„åºŸç‰‡ã€‚é€šè¿‡ AI æ£€æµ‹ç®—æ³•ï¼Œè‡ªåŠ¨è¯†åˆ«é—­çœ¼ã€æ¨¡ç³Šã€è¡¨æƒ…ä¸ä½³ã€æ›å…‰é—®é¢˜ç­‰è´¨é‡ç¼ºé™·ï¼Œå¤§å¹…å‡å°‘äººå·¥ç­›é€‰æ—¶é—´ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ¨ **æ™ºèƒ½æ£€æµ‹**: é—­çœ¼æ£€æµ‹ã€æ¨¡ç³Šæ£€æµ‹ã€è¡¨æƒ…æ£€æµ‹ã€æ›å…‰æ£€æµ‹ã€æ„å›¾æ£€æµ‹
- ğŸ“¸ **æ‰¹é‡å¤„ç†**: æ”¯æŒåŒæ—¶å¤„ç†æ•°ç™¾å¼ ç…§ç‰‡
- ğŸ¯ **ç²¾å‡†è¯„åˆ†**: å¤šç»´åº¦è´¨é‡è¯„ä¼°ï¼Œç»¼åˆè¯„åˆ†ç³»ç»Ÿ
- ğŸ–¥ï¸ **ä¸“ä¸šç•Œé¢**: ç±»ä¼¼ Adobe Bridge çš„æ¡Œé¢åº”ç”¨ä½“éªŒ
- ğŸš€ **é«˜æ€§èƒ½**: åŸç”Ÿ GUI æ¸²æŸ“ï¼Œæµç•…å¤„ç†å¤§é‡å›¾ç‰‡
- ğŸ“Š **ç»“æœå¯¼å‡º**: æ”¯æŒå¯¼å‡ºä¼˜è´¨ç…§ç‰‡ã€åºŸç‰‡å’Œè¯¦ç»†æŠ¥å‘Š

## æŠ€æœ¯æ¶æ„

### CS æ¶æ„è®¾è®¡

æœ¬é¡¹ç›®é‡‡ç”¨ **Client-Server (CS)** æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ¡Œé¢å®¢æˆ·ç«¯ (PyQt6)                â”‚
â”‚   - ä¸“ä¸šçº§ GUI ç•Œé¢                   â”‚
â”‚   - æœ¬åœ°æ–‡ä»¶è®¿é—®                      â”‚
â”‚   - é«˜æ€§èƒ½å›¾ç‰‡æ˜¾ç¤º                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯æœåŠ¡å™¨ (FastAPI)                â”‚
â”‚   - RESTful API                       â”‚
â”‚   - WebSocket å®æ—¶é€šä¿¡                 â”‚
â”‚   - AI æ£€æµ‹å¼•æ“                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯ (å®¢æˆ·ç«¯)
- **PyQt6**: ä¸“ä¸šçº§ GUI æ¡†æ¶
- **requests**: HTTP å®¢æˆ·ç«¯
- **Pillow**: å›¾åƒå¤„ç†
- **OpenCV**: å›¾åƒæ“ä½œ

#### åç«¯ (æœåŠ¡å™¨)
- **FastAPI**: é«˜æ€§èƒ½ Web æ¡†æ¶
- **Uvicorn**: ASGI æœåŠ¡å™¨
- **SQLAlchemy**: ORM æ¡†æ¶
- **OpenCV**: å›¾åƒå¤„ç†
- **MediaPipe**: äººè„¸æ£€æµ‹å’Œå…³é”®ç‚¹æå–
- **scikit-image**: å›¾åƒè´¨é‡è¯„ä¼°

## é¡¹ç›®ç»“æ„

```
PictureFilter/
â”œâ”€â”€ client/                    # PyQt6 å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ app/                  # åº”ç”¨æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ main_window.py     # ä¸»çª—å£
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ widgets/              # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”œâ”€â”€ services/             # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ api_client.py     # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ utils/                # å·¥å…·ç±»
â”‚   â””â”€â”€ main.py              # å®¢æˆ·ç«¯å…¥å£
â”‚
â”œâ”€â”€ server/                   # FastAPI åç«¯
â”‚   â”œâ”€â”€ app/                  # åº”ç”¨æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ api/              # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ detectors/        # æ£€æµ‹å™¨
â”‚   â”‚   â””â”€â”€ websocket/        # WebSocket
â”‚   â”œâ”€â”€ main.py              # æœåŠ¡å™¨å…¥å£
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ shared/                  # å…±äº«æ¨¡å—
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ server_config.yaml
â”‚   â”œâ”€â”€ client_config.yaml
â”‚   â””â”€â”€ detection_config.yaml
â”œâ”€â”€ scripts/                 # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start_server.py
â”‚   â””â”€â”€ start_client.py
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•
â””â”€â”€ docs/                    # æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.9+
- Windows 10+ / macOS 11+ / Linux

### å®‰è£…ä¾èµ–

#### å®‰è£…åç«¯ä¾èµ–

```bash
pip install -r server/requirements.txt
```

#### å®‰è£…å‰ç«¯ä¾èµ–

```bash
pip install -r client/requirements.txt
```

### å¯åŠ¨åº”ç”¨

#### æ–¹å¼ä¸€ï¼šåˆ†åˆ«å¯åŠ¨

**å¯åŠ¨æœåŠ¡å™¨**

```bash
python scripts/start_server.py
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:8000` å¯åŠ¨

**å¯åŠ¨å®¢æˆ·ç«¯**

```bash
python scripts/start_client.py
```

#### æ–¹å¼äºŒï¼šç›´æ¥è¿è¡Œ

**å¯åŠ¨æœåŠ¡å™¨**

```bash
cd server
python main.py
```

**å¯åŠ¨å®¢æˆ·ç«¯**

```bash
cd client
python main.py
```

## é…ç½®è¯´æ˜

### æœåŠ¡å™¨é…ç½®

ç¼–è¾‘ `config/server_config.yaml`:

```yaml
server:
  host: "127.0.0.1"
  port: 8000

detection:
  enable_gpu: false
  batch_size: 4
```

### å®¢æˆ·ç«¯é…ç½®

ç¼–è¾‘ `config/client_config.yaml`:

```yaml
server:
  url: "http://localhost:8000"

ui:
  theme: "light"
  thumbnail_size: 150
```

### æ£€æµ‹é…ç½®

ç¼–è¾‘ `config/detection_config.yaml`:

```yaml
eye_detection:
  enabled: true
  threshold: 0.3

blur_detection:
  enabled: true
  threshold: 50.0
```

## å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

1. API è·¯ç”±ä½äº `server/app/api/`
2. ä¸šåŠ¡é€»è¾‘ä½äº `server/app/services/`
3. æ£€æµ‹å™¨ä½äº `server/app/detectors/`
4. æ•°æ®æ¨¡å‹ä½äº `server/app/models/`

### å‰ç«¯å¼€å‘

1. ä¸»çª—å£ä½äº `client/app/main_window.py`
2. è‡ªå®šä¹‰ç»„ä»¶ä½äº `client/widgets/`
3. æœåŠ¡å±‚ä½äº `client/services/`
4. æ•°æ®æ¨¡å‹ä½äº `client/models/`

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `server/app/api/` æ·»åŠ æ–°çš„ API ç«¯ç‚¹
2. åœ¨ `client/services/api_client.py` æ·»åŠ å¯¹åº”æ–¹æ³•
3. åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­è°ƒç”¨ API
4. æ›´æ–°é…ç½®æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

## API æ–‡æ¡£

æœåŠ¡å™¨å¯åŠ¨åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹ API æ–‡æ¡£ï¼š

- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

### ä¸»è¦ API ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/files/upload` | ä¸Šä¼ æ–‡ä»¶ |
| POST | `/api/tasks/start` | å¯åŠ¨æ£€æµ‹ä»»åŠ¡ |
| GET | `/api/tasks/{id}` | è·å–ä»»åŠ¡çŠ¶æ€ |
| GET | `/api/photos` | è·å–ç…§ç‰‡åˆ—è¡¨ |
| GET | `/api/photos/{id}` | è·å–ç…§ç‰‡è¯¦æƒ… |
| POST | `/api/export` | å¯¼å‡ºç»“æœ |

## æ€§èƒ½æŒ‡æ ‡

- å•å¼ ç…§ç‰‡å¤„ç†æ—¶é—´: < 2ç§’ (1080P)
- å†…å­˜å ç”¨: < 6GB
- æ”¯æŒæ‰¹é‡å¤„ç†: 4000+ å¼ ç…§ç‰‡
- æ£€æµ‹å‡†ç¡®ç‡: > 85%

## éƒ¨ç½²

### å¼€å‘ç¯å¢ƒ

ç›´æ¥è¿è¡Œå¯åŠ¨è„šæœ¬å³å¯ã€‚

### ç”Ÿäº§ç¯å¢ƒ

#### æ‰“åŒ…å®¢æˆ·ç«¯ (Windows)

```bash
pip install pyinstaller
pyinstaller --onefile --windowed client/main.py
```

#### æ‰“åŒ…å®¢æˆ·ç«¯ (macOS)

```bash
pip install pyinstaller
pyinstaller --onefile --windowed client/main.py
```

## æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒ:

- [æ¶æ„è®¾è®¡æ–‡æ¡£](SPEC/Architecture_CS_Redesign.md)
- [åŠŸèƒ½è§„æ ¼è¯´æ˜](SPEC/äººåƒæ‘„å½±åºŸç‰‡è¿‡æ»¤å·¥å…·SPEC.md)
- [ç•Œé¢è®¾è®¡æ–‡æ¡£](SPEC/Design/é¦–é¡µé¢è®¾è®¡.md)

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub](https://github.com/dhw970805/PictureFilter)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/dhw970805/PictureFilter/issues)

## æ›´æ–°æ—¥å¿—

### v2.0.0 (2026-02-26)

**é‡å¤§å˜æ›´**

- ğŸ¯ æ¶æ„ä» Web åº”ç”¨ (BS) é‡æ„ä¸ºæ¡Œé¢å®¢æˆ·ç«¯åº”ç”¨ (CS)
- ğŸ–¥ï¸ å‰ç«¯ä» React æ”¹ä¸º PyQt6
- ğŸ ç»Ÿä¸€ä½¿ç”¨ Python å¼€å‘å‰åç«¯
- ğŸ“ é‡æ–°è®¾è®¡é¡¹ç›®æ–‡ä»¶ç»“æ„

**æ–°å¢åŠŸèƒ½**

- âœ¨ ä¸“ä¸šçº§æ¡Œé¢åº”ç”¨ç•Œé¢
- ğŸš€ æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå®Œæ•´è®¿é—®
- ğŸ’¾ æœ¬åœ°ç¼“å­˜ä¼˜åŒ–æ€§èƒ½

### v1.0.0 (2026-02-25)

- åˆå§‹ç‰ˆæœ¬ (Web æ¶æ„)

---

**PictureFilter** - è®©äººåƒæ‘„å½±ç­›é€‰æ›´é«˜æ•ˆ ğŸ“¸