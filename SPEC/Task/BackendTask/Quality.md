# 质量筛查详细实现
1. 曝光检测
- 1.1 过曝检测
 - 技术栈：OpenCV, NumPy
 - 实现目标： 判断图片是否过曝，并将“过曝”添加进Quality.json的对应位置。
 - 判断标准：
| 参数          | 含义                              | 判断阈值（参考）       |
|-------------|---------------------------------|----------------|
| 高光像素占比      | 亮度值 ≥ 245（8 位图）的像素数 / 总像素数      | >5% 判定为过曝      |
| RGB 通道最大值占比 | R/G/B 单通道值 ≥ 250 的像素占比（避免单通道过曝） | >3% 判定为过曝      |
| 直方图高光区域占比   | 亮度直方图中 240-255 区间的像素占比          | >8% 判定为过曝      |
| 过曝区域连通性     | 大面积连续过曝（如天空）比零散过曝更需关注（可选）       | 单块过曝区域 > 2% 画面 |



- 1.2 欠曝检测
 - 技术栈：OpenCV, NumPy
 - 实现目标： 判断图片是否欠曝，并将“欠曝”添加进Quality.json的对应位置。
 - 判断标准：
| 参数          | 含义                             | 判断阈值（参考）   |
|-------------|--------------------------------|------------|
| 暗部像素占比      | 亮度值 ≤ 50（8 位图）的像素数 / 总像素数      | >15% 判定为欠曝 |
| RGB 通道最小值占比 | R/G/B 单通道值 ≤ 30 的像素占比（避免单通道欠曝） | >10% 判定为欠曝 |
| 直方图暗部区域占比   | 亮度直方图中 0-40 区间的像素占比            | >20% 判定为欠曝 |
| 平均亮度值       | 整张图的平均亮度（0-255）                | < 80 判定为欠曝 |


2. 设计要求
- 设计一个本地的配置文件，储存所有欠曝和过曝的阈值，每次启动程序时读取配置文件中的阈值。
- 前端入口为“筛查”，点击筛查后，执行欠曝和过曝检测，更新json中的Quality字段，刷新视图，展示新的状态。
- 代码文件放在Backend\Exposure文件夹内。
- 为欠曝和过曝的代码文件在Exposure文件夹内额外创建一个文件夹储存。

文档版本 1.0 过曝和欠曝检测。