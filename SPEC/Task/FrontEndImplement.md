# UI界面实现Task
# 主要目标
根据 `PictureFilter\SPEC\Design\首页面设计.md` 内容，完成前端页面实现。

# 技术选型
Python3.14.3, PyQt

# 文件结构
根据 `首页面设计.md`内的设计，将对应代码实现放入以下文件夹：
--TopMenuBar
--ToolBar
--LeftPanel
--CenterContentArea
--RightPropertyPanel
--BottomStatusPanel

## 实施计划

### 1. 项目初始化与环境配置
- [ ] 创建虚拟环境并安装PyQt6依赖
- [ ] 设置项目基础结构
- [ ] 配置开发环境

### 2. 主窗口实现
- [ ] 创建主窗口类（MainWindow）
- [ ] 设置窗口属性（大小、标题、样式）
- [ ] 实现基础布局管理
- [ ] 左中右三部分布局可调整大小

### 3. 顶部菜单栏（TopMenuBar）实现
- [ ] 创建菜单栏组件
- [ ] 实现文件菜单（新建文件夹、导入、导出、批量重命名）
- [ ] 实现编辑菜单（复制/粘贴、批量修改、偏好设置）
- [ ] 实现视图菜单（视图切换、缩放）
- [ ] 实现筛选菜单（按类型/日期/大小/标签筛选）
- [ ] 实现工具菜单（批量处理、元数据编辑、插件管理）
- [ ] 实现帮助菜单（教程、关于、检查更新）
- [ ] 添加菜单样式（Windows: 微软雅黑12px, macOS: SF Pro 12px）
- [ ] 实现菜单项选中态和悬停态效果

### 4. 快捷工具栏（ToolBar）实现
- [ ] 创建工具栏组件
- [ ] 实现返回按钮（Alt+←）
- [ ] 实现前进按钮（Alt+→）
- [ ] 实现刷新按钮（F5）
- [ ] 实现视图切换按钮（Ctrl+1/Ctrl+2）
- [ ] 实现排序按钮（Ctrl+S）
- [ ] 实现筛选按钮（Ctrl+F）
- [ ] 实现批量处理按钮（Ctrl+B）
- [ ] 设置按钮样式（32×32px，圆角4px）
- [ ] 实现常态、悬停、点击状态效果

### 5. 左侧面板（LeftPanel）实现
- [ ] 创建左侧面板组件
- [ ] 实现导航栏（快速访问、最近访问、收藏夹）
- [ ] 实现筛选器（按文件类型、日期、标签）
- [ ] 实现预览尺寸滑块（50px ~ 500px）
- [ ] 实现面板可折叠功能
- [ ] 设置面板样式（模块标题、列表项、分割线）
- [ ] 实现面板拖拽调整宽度功能
- [ ] 设置最小宽度限制（100px）

### 6. 中央内容区（CenterContentArea）实现
见CenterContentArea.md

#### 实现详情：
1. **网格视图**
   - 实现了自适应网格布局，包含8个示例文件项
   - 每个文件项显示缩略图（根据文件类型显示不同图标）和文件名
   - 支持点击选中（蓝色边框）和双击打开
   - 悬停效果：背景色变化
   - **注意**：双击功能仅发送信号，未实现真正的文件打开逻辑

2. **列表视图**
   - 实现了6列表格：缩略图、名称、大小、修改日期、类型、分辨率
   - 包含5个示例数据行
   - 支持选择行高亮和文件选择信号
   - **注意**：列标题排序功能未实现，仅展示静态数据

3. **详情视图**
   - 左侧：400px固定宽度预览区，显示大图预览占位符
   - 右侧：信息分组显示（基本信息、元数据、标签/评分）
   - 每个信息组包含6个信息项
   - **注意**：预览功能仅显示占位符，未实现真正的图片预览

4. **视图切换**
   - 修复了所有视图切换问题，特别是从详情视图切换到其他视图时的内容残留问题
   - 实现了强化的布局清理机制 `_force_clear_layout()`
   - 支持在三个视图间任意切换，无界面卡顿或内容重叠

5. **样式与主题**
   - 实现了统一的暗色主题（#1A1A1A背景色）
   - 所有组件使用一致的圆角和边距设计
   - 滚动条样式自定义，融入整体暗色主题

6. **信号机制**
   - 实现了文件选择信号（file_selected）
   - 实现了文件打开信号（file_opened）
   - 信号已连接到相应的事件处理函数

7. **性能优化**
   - 使用 `_force_clear_layout()` 方法彻底清理布局，避免内存泄漏
   - 实现了部件的递归删除机制
   - 确保切换视图时的界面响应流畅

#### 未实现的功能（需后续开发）：
1. **右键菜单**：网格项的右键操作菜单未实现
2. **多选功能**：Ctrl/Shift点击和拖拽框选未实现
3. **排序功能**：列表视图的列标题排序未实现
4. **列标题高亮**：点击列标题的高亮状态未实现
5. **真实预览**：图片预览和元数据显示为静态内容
6. **懒加载**：大文件列表的懒加载机制未实现
7. **预
- [ ] 设置状态栏样式（背景色、文字色、字体）

### 9. 面板交互功能实现
- [ ] 实现面板拖拽调整大小
- [ ] 实现面板隐藏/显示功能
- [ ] 实现重置布局功能（视图 > 重置布局）
- [ ] 实现面板右键菜单

### 10. 文件操作功能实现
- [ ] 实现文件预览功能（鼠标悬停显示大图）
- [ ] 实现多选功能（Ctrl点击、Shift点击、拖拽框选）
- [ ] 实现批量操作功能（重命名、标签修改、导出）
- [ ] 实现进度条显示和取消操作

### 11. 快捷键实现
- [ ] 全选文件（Ctrl+A）
- [ ] 复制文件（Ctrl+C）
- [ ] 粘贴文件（Ctrl+V）
- [ ] 删除文件（Delete）
- [ ] 重命名文件（F2）
- [ ] 视图切换（Ctrl+1/2/3）
- [ ] 缩放（Ctrl++/-）
- [ ] 刷新（F5）
- [ ] 打开筛选面板（Ctrl+F）

### 12. 样式与主题实现
- [ ] 实现Windows主题样式
- [ ] 实现macOS主题样式
- [ ] 设置颜色体系（主色、背景色、文字色等）
- [ ] 设置字体规范（Windows: 微软雅黑, macOS: SF Pro）
- [ ] 实现组件样式（按钮、输入框、滚动条）

### 13. 性能优化
- [ ] 实现懒加载机制
- [ ] 实现预览缓存
- [ ] 优化大文件夹加载（>1000文件）
- [ ] 实现异步加载预览图

### 14. 跨平台适配
- [ ] Windows适配（窗口样式、快捷键、字体）
- [ ] macOS适配（窗口样式、快捷键、字体）
- [ ] 实现分辨率自适应（最低1280×720）
- [ ] 窗口缩放适配

### 15. 测试与验收
- [ ] 单元测试（各组件功能测试）
- [ ] 集成测试（整体界面交互测试）
- [ ] 性能测试（启动速度、文件加载、预览速度）
- [ ] 内存占用测试
- [ ] 跨平台测试
- [ ] 验收测试（所有依赖项正确安装、程序能正确运行）

# 补充说明
只需设计出界面以及基本的交互功能，不需要添加模拟数据。

# 验收标准
1. 所有依赖项正确安装
2. 运行程序，确保程序能正确运行并打开
3. 所有面板和组件显示正常
4. 所有菜单项和按钮可点击
5. 面板可拖拽调整大小和隐藏
6. 视图可正常切换
7. 快捷键功能正常